# 安卓

 android:gravity="left|bottom"设置它内部的组件位置  可以指定一个参数，也可以使用两个参数

layout_weight:占用剩余空间，



登录页面，作用的账号和密码，可以使用drawableLeft

前景图和前景图的位置：前景图不会被覆盖掉，foreground    foregroundgravity

可以是一张图片，位置可以使用     right|bottom





表格布局

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context="com.example.androidtable.MainActivity" >

    <TableRow >
        <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="XXX"/>
         <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="XXX"/>       
         <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="XXX"/>       
         <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="XXX"/>
    </TableRow>
</TableLayout>
```



可以设置那些列被隐藏，那些列被拉伸，假如第二列被隐藏，那么就设置参数为1

 android:collapseColumns="1"

 android:stretchColumns="3"那一列被拉伸

如果内容太大无法显示的时候，收缩就是收缩某一列的宽度，让内容进行显示

android:shrinkColumns="2"



## 网格布局管理器

网格可以跨行，可以跨列

可以设置一行显示几个，一列显示几个columnCount(列个数)

排列形式：orientation=“” v h



```
layout_column:位置第几列的
layout_columnSpan:横向跨几列
layout_columnWeight:横向的权重
layout_grary:怎样占据子组件的
layout_row:位置第几hang的
layout_rowSpan:横向跨几hang 
```





## 基本组件

输入框：			

```
android:ems="14" 宽度
android:singleLine="true"单行
android:lines="6"多行
```

拉伸整个屏幕：scaleType="fitXY"



单选按钮

```
	<RadioButton 
	    android:layout_height="wrap_content"
	    android:layout_width="wrap_content"
	    android:text="男"/>
```

text：添加文本    checked:true  选中

单选组

```
	<RadioGroup  android:layout_height="wrap_content"
	    android:layout_width="wrap_content">
		<RadioButton 
	    android:layout_height="wrap_content"
	    android:layout_width="wrap_content"
	    android:checked="true"
	    android:text="男"/>
		<RadioButton 
	    android:layout_height="wrap_content"
	    android:layout_width="wrap_content"
	    android:checked="true"
	    android:text="女"/>
	</RadioGroup>
```

我们要为一个按钮组添加一个事件监听器，我们需要对他们加上一个ID

方式一：

```
		//方式一：
		radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
			
			@Override
			public void onCheckedChanged(RadioGroup group, int checkedId) {
				// TODO Auto-generated method stub
				RadioButton r = (RadioButton)findViewById(checkedId);
				//获取参数
				r.getText();
				
			}
		});
```

```
<RadioGroup android:layout_height="wrap_content"
	    android:id="@+id/radios"
	    android:layout_width="wrap_content">
	    	<RadioButton 
	    android:layout_height="wrap_content"
	    android:layout_width="wrap_content"
	    android:checked="true"
	    android:text="男"/>
		<RadioButton 
	    android:layout_height="wrap_content"
	    android:layout_width="wrap_content"
	    android:text="女"/>
	</RadioGroup>
```

方式二：

```
	<RadioGroup android:layout_height="wrap_content"
	    android:id="@+id/radios"
	    android:layout_width="wrap_content">
	    	<RadioButton 
	    android:layout_height="wrap_content"
	    android:layout_width="wrap_content"
	    android:checked="true"
	    android:text="男"/>
		<RadioButton 
	    android:layout_height="wrap_content"
	    android:layout_width="wrap_content"
	    android:text="女"/>
	</RadioGroup>
	<Button 
	    android:id="@+id/XXX"
	    android:layout_width="wrap_content"
	    android:layout_height="wrap_content"
	    android:text="提交"/>
```

```
		findViewById(R.id.XXX).setOnClickListener(new View.OnClickListener() {
			
			@Override
			public void onClick(View v) {
				// TODO Auto-generated method stub
				//循环
				for(int i=0;i<radioGroup.getChildCount();i++) {
					RadioButton radioButton = (RadioButton)radioGroup.getChildAt(i);
					if(radioButton.isChecked()) {
						radioButton.getText();
						//单选只有一个可以选中，这个时候就可以跳出
						break;
					}
				}
			}
		});
```

## 复选框

```
<CheckBox 
	    android:layout_width="wrap_content"
	    android:text="显示密码"
	    android:layout_height="wrap_content">
	    
	</CheckBox>
	<CheckBox 
	    android:layout_width="wrap_content"
	    android:text="显示密码"
	    android:layout_height="wrap_content">
	    
	</CheckBox>
		<CheckBox 
	    android:layout_width="wrap_content"
	    android:text="显示密码"
	    android:layout_height="wrap_content">
	    
	</CheckBox>
		<CheckBox 
	    android:layout_width="wrap_content"
	    android:text="显示密码"
	    android:layout_height="wrap_content">
	    
	</CheckBox>
			<CheckBox 
	    android:layout_width="wrap_content"
	    android:text="显示密码"
	    android:layout_height="wrap_content">
	    
	</CheckBox>
```

```
为了可以监听，我们需要加入一个ID属性
final CheckBox checkBox = (CheckBox) findViewById(R.id.ch1);
		checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
			
			@Override
			public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
				// TODO Auto-generated method stub
				if(checkBox.isChecked()) {
					checkBox.getText();
				}
			}
		});
```

## 日期选择器

```

	<DatePicker 
	    android:id="@+id/data"
	    android:layout_width="match_parent"
	    android:layout_height="match_parent"
	    
	    />
```

添加事件：获取日期组件  获取年份 月 日

给组件进行初始化，年月日设置，然后在加入一个监听器

```
    DatePicker datePicker;
    int year ;
    int month;
    int da;
    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        datePicker = findViewById(R.id.datepi);
        Calendar calendar = Calendar.getInstance();
        int year = calendar.get(Calendar.YEAR);
        int month = calendar.get(Calendar.MONTH);
        final int da = calendar.get(Calendar.YEAR);
        datePicker.init(year, month, da, new DatePicker.OnDateChangedListener() {
            @Override
            public void onDateChanged(DatePicker datePicker, int year, int month, int day) {
                DatePaAcitivty.this.year = year;
                DatePaAcitivty.this.month = month;
                DatePaAcitivty.this.da = day;
            }
        });
```

## 时间选择

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent">
        <TimePicker android:layout_width="wrap_content"
                    android:id="@+id/timepa"
                    android:layout_height="wrap_content">

        </TimePicker>
</LinearLayout>

```

```
  protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        timePicker = findViewById(R.id.timepa);
        //时间监听器
        timePicker.setOnTimeChangedListener(new TimePicker.OnTimeChangedListener() {
            @Override
            public void onTimeChanged(TimePicker timePicker, int hour, int minutes) {
                String str = hour+"shi";

            }
        });
```

## 计时器

```
<Chronometer android:layout_width="wrap_content"
		  android:layout_height="wrap_content"/>
<Chronometer android:layout_width="wrap_content"
          android:format="使用时间：%s"
          android:layout_height="wrap_content"/>
```

方法

setBase():开始计时              setFormat：设置时间格式

setStart(): 指定开始时间      stop():停止

setOnChronometerTickListener():添加事件的

```
        chronometer = findViewById(R.id.chronometeri);
        chronometer.setBase(SystemClock.elapsedRealtime());
        chronometer.setFormat("%s");
        chronometer.start();
        chronometer.setOnChronometerTickListener(new Chronometer.OnChronometerTickListener() {
            @Override
            public void onChronometerTick(Chronometer chronometer) {
                if(SystemClock.elapsedRealtime()-chronometer.getBase()>=60){
                    chronometer.stop();
                }
            }
        });
```

## 进度条

```
<ProgressBar android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
```

样式设置，默认是原型的，也可以是其他的



通过style进行设置

- 主题方式
- 安装自带样式

```
<ProgressBar android:layout_width="match_parent"
             style="?android:attr/progressBarStyleHorizontal"
             android:layout_height="wrap_content"/>
```

设置进度条属性

- 最大进度的
- 当前进度

```
    <ProgressBar android:layout_width="wrap_content"
                 android:layout_height="wrap_content"/>

    <ProgressBar android:layout_width="match_parent"
                 style="?android:attr/progressBarStyleHorizontal"
                 android:background="#fff"
                 android:max="100"
                 android:progress="40"
                 android:layout_height="wrap_content"/>
```

进度条的改变，可以通过线程来改变setProgress更新进度

setVisibillity（）设置是否显示

案例“

````
    <ProgressBar android:layout_width="match_parent"
                 android:id="@+id/progress"
                 style="?android:attr/progressBarStyleHorizontal"
                 android:background="#fff"
                 android:max="100"
                 android:progress="40"
                 android:layout_height="wrap_content"/>
````

activity程序

```
public class ProgressActivity extends Activity {
    private Handler mHandler;
    private int mProgress;
    private ProgressBar progressBar;
    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_progess);
        progressBar = findViewById(R.id.progress);
        mHandler = new Handler(){
            @Override
            public void handleMessage(Message msg) {
                if(msg.what==0x111){
                    progressBar.setProgress(mProgress);
                }else {
                    /*不显示*/
                    progressBar.setVisibility(View.GONE);
                }
            }
        };
        //创建线程
        new Thread(new Runnable(){
            @Override
            public void run() {
                while (true) {
                    mProgress = dowork();
                    Message message = new Message();
                    if (mProgress < 100) {
                        message.what = 0x11;
                        mHandler.sendMessage(message);
                    } else {
                        message.what = 0x110;
                        mHandler.sendMessage(message);
                        break;
                    }
                }
            }
            private  int dowork(){
                mProgress+=Math.random()*10;
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                return mProgress;
            }
        }).start();
    }

```

## 拖动条

```
    <SeekBar android:layout_width="match_parent" 
    		android:layout_height="wrap_content"/>
```

设置最大值和当前值

```
    <SeekBar android:layout_width="match_parent"
             android:max="100"
             android:progress="50"
             android:layout_height="wrap_content"/>
```

设置拖动条的图片

```
    <SeekBar android:layout_width="match_parent"
             android:max="100"
             android:progress="50"
             android:thumb="@drawable/ic_launcher_background"
             android:layout_height="wrap_content"/>
```

拖动条事件监听器

```
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_seek_bar);
        android.widget.SeekBar seekBar = findViewById(R.id.seekba);
        seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            /*进度改变时执行的方法*/
            @Override
            public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
                
            }
            /*开始触摸时的方法*/
            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }
            /*停止触摸时的方法*/
            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }
        });
    }
}
```

## 星级条

```
星级条
    <RatingBar android:layout_width="wrap_content"
               android:layout_height="wrap_content"/>
```

星星的个数

```
    <RatingBar android:layout_width="wrap_content"
               android:numStars="8"
               android:layout_height="wrap_content"/>
```

点亮星星

```
    <RatingBar android:layout_width="wrap_content"
               android:numStars="8"
               android:rating="4"
               android:layout_height="wrap_content"/>
```

只可以一整颗一整颗的显示

```
    <RatingBar android:layout_width="wrap_content"
               android:numStars="8"
               android:rating="4"
               android:stepSize="1"
               android:layout_height="wrap_content"/>
```

星星不允许改变

```
    <RatingBar android:layout_width="wrap_content"
               android:numStars="8"
               android:rating="4"
               android:stepSize="1"
               android:isIndicator="true"
               android:layout_height="wrap_content"/>
```

星星的属性

```
        RatingBar r = findViewById(R.id.ratings);
        //获取星星
        String star = String.valueOf(r.getRating());
        //每次可以改变几个星星
        String stepStar = String.valueOf(r.getStepSize());
        //进度
        String progress = String.valueOf(r.getNumStars());
```

## 图像管理器

图像显示

```
    <ImageView android:layout_width="wrap_content"
               android:src="@mipmap/ic_launcher"
               android:layout_height="wrap_content"/>
```

指定大小

```
    <ImageView android:layout_width="100dp"
               android:src="@mipmap/ic_launcher"
               android:layout_height="100dp"/>
```

指定缩放

```

```

最大宽度和最大高度，在使用一下adjustViewBounds=true

蒙上颜色

```
    <ImageView android:layout_width="160dp"
                android:src="@mipmap/ic_launcher"
               android:tint="#aa777777"
               android:layout_height="100dp"/>
```

## 图像切换





## Activity

运行状态：可以先进行操作

暂停操作：可以看见，但是不可以操作

停止状态：退出之后

销毁强制停止

#### 生命周期

创建----开始----XX---运行-----暂停---销毁

创建Activity，继承一个Activity，重写回调方法



配置Activity，在xml中进行配置，也可以设置入口。

```
<intent-filter>
	<action android:name="android.intent.action.MAIN></action>//作为响应的名称的
	<category android:name="android.intent.category.LAUNCHER"></category>//在什么情况下执行的
</intent-filter>
```

通过startActivity



finsh（）再相应的事件中调用即可

Activity刷新，使用onCreate（null）；

---------

关闭页面fiansh方法，使用之后就会将当前的关闭，然后打开另一个 。





## 多个Activity的使用

#### 参数传递



Bundle进行数据传输，使用Bundle存储的是一个一个的键值对。

将数据通过putXXX()方法保存到Bundle中，然后通过outExtras传递到Intent中的。启动另一个Activity。

```
创建一个Intent，设置本activity和目标Activity,然后创建bundle,将数据保存到bundle中，然后再讲数据放入Intent中。
```

获取参数

```
Intent intent = getIntent();
Bundle bundle = new Bundle();
bundle.getString("XX");
```



#### 调用Activity并返回结果

startActivity可以启动另一个activity，我们需要一个返回结果，那么我们使用startActivityForResult（）,可以启动一个activity，等一个activity关闭之后，就会将结果返回来。

调用格式

```
startActivityForResult(Intent intent,int requestCode)
一个是我们启动的intent，还有一个是返回的码，标识来源
Intent intent = new Intent(MainActivity.this,DetailActivity.class);  Intent对象，启动一个新的Activity
startActivityResult(intent,0x007);
```

目标activity，获取Intent，然后设置参数，返回

```
Intent intent = new Intent();
Bundle bundle = new Bundle();
bundle.putInt("key1",1);
intent.putExtras(bundle);
setResult(0x007，intent);一般设置相同
finsh();
```

## Fragment

一个行为或者是一部分的页面，通过Fragment进行页面之间的切换。他需要嵌入到一个activity中，它的生命周期收到所在的生命周期的影响。



创建Fragment，继承Fragment.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    
	<TextView 
	    android:layout_width="wrap_content"
	    android:layout_height="wrap_content"
	    android:text="XXXXXXXXXX"/>
</LinearLayout>

```

java代码

```
public class MyFragment extends Fragment{
	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
		// TODO Auto-generated method stub
		View view = inflater.inflate(R.layout.activity_fragment, container);
		return view;
	}

}
```

在Activity中使用Fragment

在xml中引入

```

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />
	<fragment 
	    android:layout_width="wrap_content"
	    android:layout_height="match_parent"
	    android:name="com.example.listfragment.MyFragment"
	    android:id="@+id/list"
	    android:layout_weight="1"/>
	<fragment 
	    android:layout_width="wrap_content"
	    android:layout_height="match_parent"
	    android:name="com.example.listfragment.DetailFragment"
	    android:id="@+id/detail"
	    android:layout_weight="2"/>
```









运行时添加

(1)在代码中加入(不成功，不知道为什么)

```
		DetailFragment detailFragment = new DetailFragment();
		FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
		
		fragmentTransaction.add(android.R.id.content, detailFragment);
		fragmentTransaction.commit();
```

(2)





## intent

意图，Activity Service Broadcast Receiver它们之间通信使用Intent.

开启activity

开启Service

发生广播



#### 对象属性

- 组件名称 component对象  |应用包名  类名

```java
Component component = new Component(包名，包名.列名);
intent.setComponent(component);
startActivity(intent);  
页面跳转
```

- Action和Data

```
Action动作  data，数据
```

Action常量,比如打电话等

data数据url等，数据规格

案例：

​	图片按钮

​	获取图片按钮

```
Intent intent = new Intent();
ImageView s = (ImageView)v;
switch(v.getId()){
    case R.id.XX：
    	intent.setAction(intent.ACTION_DIAL);
    	intent.setData(Uri.parse("tel:233223"));
    	startActivity(intent);
}
```



- Action和Category属性

  案例

  ```
  执行返回系统桌面
  Intent intent = new Intent();
  intent.setAction(intent.ACTION_MAIN);
  intent.setCategory(intent.CATEGORY_HOME);
  ```

  

- Extras：附加数据

  多个activity中作为数据交换

- Flags：安卓程序如何启动另一个activity

  我们打开一个应用程序，我们返回桌面，下一次我们在打开的时候，就会去刚才打开的页面，我们可以设置让其从开始启动。

  ```
  Intent intent = new Intent(A,B);
  intent.setFlags(intent.FLAG_ACTIVITY_NO_HISTORY);
  startActivity(intent);
  ```

  

- Intent种类：显示和隐式

  隐式一般需要action    category   data

  隐式一般是不同应用程序之间的

- 过滤器







--------------------



---------------

### bug

- DDMS工具
- 输出信息
- 程序调试





------------

事件和大纲

事件处理   物理按键   触摸事件`



基于监听   基于模型  事件源

基于回调，某一个事件发生时，重现哪一个方法

```
@Override
	public boolean onTouchEvent(MotionEvent event) {
		Toast.makeText(MainActivity.this, "触摸", Toast.LENGTH_SHORT).show();
		return super.onTouchEvent(event);
	}
	
	@Override
	public boolean onKeyDown(int keyCode, KeyEvent event) {
		Toast.makeText(MainActivity.this, "按键按下", Toast.LENGTH_SHORT).show();
		return super.onKeyDown(keyCode, event);
	}
	
	@Override
	public boolean onKeyUp(int keyCode, KeyEvent event) {
		Toast.makeText(MainActivity.this, "按键弹起", Toast.LENGTH_SHORT).show();
		return super.onKeyUp(keyCode, event);
	}
```

按键按下 按下 弹起 长按





## 触摸事件







## 单击事件和触摸事件

点击屏幕会出现单机和触摸事件，先执行触摸事件，如果没有消费，然后在处理单机事件。返回一个true就代表消费了。





## 手势检测

GestureDetector手势检测

GestureDetector.OnGestureListener

---------

onDown:按下    onFling：拖过    onLongPress:长托   onScroll：  onShowPress   onSingleTapUp：轻击





## 资源 

字符串  颜色   尺寸资源    布局资源   数组资源   图像资源  主题资源   菜单资源  国际化



#### 字符串

定义资源 <String>中定义    使用资源，可以是xml,也可以是java文件

- 定义资源

```xml
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">androidres</string>
    <string name="hello_world">Hello world!</string>
    <string name="action_settings">Settings</string>
</resources>
```

- 使用资源

  xml

```
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

```

​	java中设置

```
TextView textView = (TextView)findViewById(R.id.text);
textView.setText(getResources().getString(R.string.app_name));
```



#### 颜色资源

透明度+红绿蓝

定义颜色资源

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="colorred">#ff0000</color>
</resources>
```

使用颜色资源

```
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@color/colorred"
        android:text="@string/hello_world" />
```

```
		TextView textView = (TextView)findViewById(R.id.textview);
		textView.setTextColor(getResources().getColor(R.color.colorred));
```

## 尺寸资源

dp:独立像素，不同屏不一样，一般使用dp

sp：设置字体大小的，可以根据手机首选进行缩放