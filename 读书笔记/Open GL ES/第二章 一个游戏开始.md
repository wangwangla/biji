# 顶点和着色器

​	我们使用独立的点集合构建物体，这些成为顶点，之后会使用着色绘制图性，以及告诉OpenGLES如何绘制的小程序。

​	顶点汇聚成一个一个的图形，使用着色器绘制。

#### 桌子的绘制

--------------

​	按照OpenGLES可以认识的形式创建，一下步骤

- 介绍顶点

  一个顶点就是一个集合对象的拐点，这个点有很多的附加属性，最重要的就是位置，它代表了这个顶点在空间位置中定位。

- 游戏中的桌子

  一个桌子有4个点，4个拐点，也就是有四个顶点，每个顶点在每个维度上都有一个坐标。

- 在代码中定义顶点

  我们使用数组存储这些点，二维中必须有x和y轴的坐标。

  每个顶点的个数     每个点的坐标

  ```
  	private static final int POSITION_COMPONENT_COUNT = 2;
  	public MyRenderer() {
  		// TODO Auto-generated constructor stub
  		float []tableVertices = {
  			0f,0f,
  			0f,14f,
  			9f,0f,
  			9f,14f
  	};
  }
  ```

  十进制表示每个顶点所在的位置。

- 点、直接、三角形

  在OpenGLES中仅仅支持点、直线、三角形。我们都是同点，并告诉他们如何连接起来。通过三角形进行组成其他更加复杂的图像。

  ```
  /*更新代码如下*/
  0f,0f,
  9f,14f,
  0f,14f,
  0f,0f,
  9f,0f,
  9f,14f
  ```

  它的顺序是逆序排列，因为正面是逆序，反面是顺序。

- 增加中间的线和点

  ```
  0f,7f,
  9f,7f,
  4.5f,2f,
  4.5f ,12f
  ```

  顶点的数据是浮点型，不是双精度的。

  ##### 是数据可以被OpenGLES存取

  -----------------

  ​	顶点定义完成了，但是代码和顶点，使用了不同的代码，Java代码运行在虚拟机上，他是不可以访问本地的数据的，除了特殊的命令。并且虚拟机会检测无用的变量等，进行垃圾回收掉的。OpenGLES运行在本地硬件中，没有虚拟机，也没有垃圾回收等操作。二者需要通信就需要使用JNI,这样就可以进行通信，还有一种就是通过改变内存分配方式，使用java的特殊类，在本地开辟空间，并将内存中的数据复制到这片内存，不受垃圾回收机制的控制

  - 代码如下

    ```
    //顶点的个数
    private static final int BYTES_PER_FLOAT = 4;
    //复制到本地存储的位置
    private final FloatBuffer vertexData;
    ```

    ByteBuffer.allocateDirect(BYTES_PER_FLOAT*tableVertices.length).order(ByteOrder.nativeOrder())创建一个本地的内存。将数据变为本地的方式。

    .asFloatBuffer()：将数据变为FloatBuffer，因为我们不愿去操作一个单字节，所以输出为Float的形式。

    vertexData.put(tableVertices)：将数据从虚拟机复制到本地内存区。当使用完毕之后，就会释放本块内存。

    ##### 引入管道

    ----------

    将顶点坐标从虚拟机复制到本地内存中，需要将它们传入到管道。就需要使用着色器，找色器告诉图像处理单元，如何出理这些数据。

    ​	顶点着色器：每个顶点的最终位置，每个顶点都会执行一次，一旦位置确定了，就可以吧这些点的集合组装成点、直线、以及三角形。

    ​	片段着色1器：将每个点、三角形、直接形成最终的颜色，对于每个片段，都会执行一次。

    颜色形成后就会将其写入到缓冲区中，最终显示到屏幕上。

  - 创建一个顶点着色器

    创建位置：raw文件夹中。

  - 写如下内容

    ```
    attribute vec4 a_Position;
    
    void main()
    {
    	gl_Position = a_Position;
    }
    ```

  - 





























